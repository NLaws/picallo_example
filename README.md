Recreating the bilevel optimization example from 

Picallo, Miguel, Saverio Bolognani, and Florian DÃ¶rfler. "Sensitivity-conditioning: Beyond Singular Perturbation for Control Design on Multiple Time Scales." IEEE Transactions on Automatic Control (2022).

https://ieeexplore.ieee.org/abstract/document/9779971